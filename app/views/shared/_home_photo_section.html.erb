<script>
  $(function(){
    jQuery("#slider").slider({
      min: <%= prices[0] %>,
      max: <%= prices[1] %>,
      values: [<%= prices[0] %>,<%= prices[1] %>],
      range: true,
      stop: function(event, ui) {
        jQuery("input#minCost").val(jQuery("#slider").slider("values",0));
        jQuery("input#maxCost").val(jQuery("#slider").slider("values",1));
      },
      slide: function(event, ui){
        jQuery("input#minCost").val(jQuery("#slider").slider("values",0));
        jQuery("input#maxCost").val(jQuery("#slider").slider("values",1));
      }
    });})
  jQuery("input#minCost").change(function(){
    var value1=jQuery("input#minCost").val();
    var value2=jQuery("input#maxCost").val();
    if(parseInt(value1) > parseInt(value2)){
      value1 = value2;
      jQuery("input#minCost").val(value1);
    }
    jQuery("#slider").slider("values",0,value1);
  });

  jQuery("input#maxCost").change(function(){
    var value1=jQuery("input#minCost").val();
    var value2=jQuery("input#maxCost").val();
    if (value2 > <%= prices[1] %>) { value2 = <%= prices[1] %>; jQuery("input#maxCost").val(<%= prices[1] %>)}
    if(parseInt(value1) > parseInt(value2)){
      value2 = value1;
      jQuery("input#maxCost").val(value2);
    }})
</script>
<section id = "photohome">
  <div class = transparent-block300></div>
  <div id="photoslide" class = "whitestripe active">
    <h1>- ФОТОСЪЕМКА -</h1>
    <%= form_tag("/catalog", method: "post", id: 'photo_filter_form') do %>
        <div class = "slider-wrapper">
          <h2>средняя стоимость за час работы</h2>
          <input name = 'filter[price[min]' class = "slider-price-cell cell-min" type="number" min="0" max="100000" id="minCost" value=<%= prices[0] %>>
          <input name = 'filter[price[max]' class = "slider-price-cell cell-max" type="number" min="0" max="100000" id="maxCost" value=<%= prices[1] %>>
          <div id="slider"></div>
          <%= submit_tag 'ИСКАТЬ', class:"btn-search", onclick: "showFilter(); return false;" %>
          <%= hidden_field('filter', 'category', {id: 'photo_category_field', value: 'Все'}) %>
          <%= hidden_field('filter', 'area', {id: 'photo_area', value: 'Фотосъемка'}) %>
        </div>
    <% end %>
  </div>

  <script>
    var setAndSubmit = function (formId,fieldId,category) {
      $(fieldId).val(category);
      $(formId).submit();
    }
  </script>

  <div id="photoslide-filters" class = "whitestripe">
    <div class = "filter-and-controls-section">
      <div class="filter-section-back-step">
        К ЦЕНЕ
        <div class="filter-section-back-step-button" onclick="showPrice()">
        </div>
      </div>
    <div class = "filter-section">

      <a class="filter-section-item"  ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Свадьбы')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-1"></div>
          <div class="filter-section-item-flipper-back">Свадьбы</div>
        </div>
      </a>
      <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Праздники')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-2"></div>
          <div class="filter-section-item-flipper-back">Праздники</div>
        </div>
      </a>
      <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Love Story')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-3"></div>
          <div class="filter-section-item-flipper-back">Love Story</div>
        </div>
      </a>
      <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Персональные')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-4"></div>
          <div class="filter-section-item-flipper-back" >Персональные</div>
        </div>
      </a>
      <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Коммерческие')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-5"></div>
          <div class="filter-section-item-flipper-back" >Коммерческие</div>
        </div>
      </a>
      <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Вечеринки')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-6"></div>
          <div class="filter-section-item-flipper-back" >Вечеринки</div>
        </div>
      </a>
      <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Другие')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-7"></div>
          <div class="filter-section-item-flipper-back">Другие</div>
        </div>
      </a>
      <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Фотопроекты')">
        <div class="filter-section-item-flipper">
          <div class="filter-section-item-flipper-front" id="filter-item-front-8"></div>
          <div class="filter-section-item-flipper-back" >Фотопроекты</div>
        </div>
      </a>
    </div>
      <div class="filter-section-next-step">
        Пропустить
        <div class="filter-section-next-step-button" onclick="setAndSubmit('#photo_filter_form', '#photo_category_field', 'Все')">
        </div>
      </div>
      <!--<button id=btn-hidefilters>СКРЫТЬ РАЗДЕЛЫ</button>-->
    </div>
  </div>

</section>