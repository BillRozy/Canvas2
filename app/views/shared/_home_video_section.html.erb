<script>
  $(function(){
    var slider2 = $('#slider2');
    var minCost2 = $('input#minCost2');
    var maxCost2 = $('input#maxCost2');
    slider2.slider({
      min: <%= prices[0] %>,
      max: <%= prices[1] %>,
      values: [<%= prices[0] %>,<%= prices[1] %>],
      range: true,
      animate: 'fast',
      stop: function(event, ui) {
        minCost2.val(slider2.slider("values",0));
        maxCost2.val(slider2.slider("values",1));
        $(".scrollable-sections-container").swipe('enable');
      },
      slide: function(event, ui){
        minCost2.val(slider2.slider("values",0));
        maxCost2.val(slider2.slider("values",1));
      },

      start: function(event, ui){
        $(".scrollable-sections-container").swipe('disable');
      }
    });

    minCost2.on('input', function(){
      var value1= minCost2.val();
      var value2= maxCost2.val();
      if(parseInt(value1) > parseInt(value2)){
        value1 = value2;
        minCost2.val(value1);
      }
      slider2.slider("values",0,value1);
    });

    maxCost2.on('input', function(){

      var value1=minCost2.val();
      var value2=maxCost2.val();
      if (value2 > <%= prices[1] %>) { value2 = <%= prices[1] %>; maxCost2.val(<%= prices[1] %>)}
      if(parseInt(value1) > parseInt(value2)){
        value2 = value1;
        maxCost2.val(value2);
      }
      slider2.slider("values",0,value2);
    });
  });

 </script>


<!--------СЛАЙД 2-------------->

<div id = "videohome" class="scrollable-section">
  <div class = transparent-block300></div>
  <div id="videoslide" class = "whitestripe active">
    <h1>- Видеосъемка -</h1>
    <%= form_tag("/catalog", method: "post", id: 'video_filter_form') do %>
        <div class = "slider-wrapper">
          <h2>средняя стоимость за час работы</h2>
          <input name="filter[price[min]" class = "slider-price-cell cell-min" type="number" min="0" max="100000" id="minCost2" value=<%= prices[0] %>>
          <input name = 'filter[price[max]' class = "slider-price-cell cell-max" type="number" min="0" max="100000" id="maxCost2" value=<%= prices[1] %>>
          <div id="slider2"></div>
          <%= hidden_field('filter', 'area', {id: 'video_area', value: 'Видеосъемка'}) %>
          <%= hidden_field('filter', 'category', {id: 'video_category_field', value: 'TFP'}) %>
          <%= submit_tag 'ИСКАТЬ', class:"btn-search", onclick: "showFilter(); return false;" %>
        </div>
    <% end %>
  </div>

  <div id="videoslide-filters" class = "whitestripe">
    <div class = "filter-and-controls-section">
      <div class="filter-section-back-step">
        К ЦЕНЕ
        <div class="filter-section-back-step-button" onclick="showPrice()">
        </div>
      </div>
      <div class = "filter-section">
        <a class="filter-section-item"  ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'TFP')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-1"></div>
            <div class="filter-section-item-flipper-back">TFP</div>
          </div>
        </a>
        <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'Творческие')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-2"></div>
            <div class="filter-section-item-flipper-back">Творческие</div>
          </div>
        </a>
        <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'Свадьбы')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-3"></div>
            <div class="filter-section-item-flipper-back">Свадьбы</div>
          </div>
        </a>
        <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'Праздники')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-4"></div>
            <div class="filter-section-item-flipper-back" >Праздники</div>
          </div>
        </a>
        <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'Вечеринки')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-5"></div>
            <div class="filter-section-item-flipper-back" >Вечеринки</div>
          </div>
        </a>
        <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'Love Story')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-6"></div>
            <div class="filter-section-item-flipper-back" >Love Story</div>
          </div>
        </a>
        <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'Коммерческие')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-7"></div>
            <div class="filter-section-item-flipper-back">Коммерческие</div>
          </div>
        </a>
        <a class="filter-section-item" ontouchstart="$(this).toggleClass('hover');" onclick="setAndSubmit('#video_filter_form', '#video_category_field', 'Другие')">
          <div class="filter-section-item-flipper">
            <div class="filter-section-item-flipper-front" id="filter-item-front-8"></div>
            <div class="filter-section-item-flipper-back" >Другие</div>
          </div>
        </a>
      </div>
      <div class="filter-section-next-step">
      </div>
    </div>
  </div>

</div>